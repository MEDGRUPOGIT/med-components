import{r as e,f as r,c as t,j as i,h as s,H as a,i as d}from"./p-3df3e749.js";import{c as o}from"./p-90f9de28.js";const l=(e,r)=>{const t=c(e,r);return t&&e.ownerDocument?e.ownerDocument.importNode(t.content,!0).children[0]:null},c=(e,r)=>{switch(r){case"item":return e.querySelector("template:not([name])");case"header":return e.querySelector("template[name=header]");case"footer":return e.querySelector("template[name=footer]")}},m=(e,r,t,i,s,a,d,o,l,c,m,n)=>{const h=[],p=n+m;for(let g=m;g<p;g++){const m=e[g];if(s){const r=s(m,g,e);null!=r&&h.push({i:c++,type:"header",value:r,index:g,height:t?t(r,g):d,reads:t?0:2,visible:!!t})}if(h.push({i:c++,type:"item",value:m,index:g,height:r?r(m,g):l,reads:r?0:2,visible:!!r}),a){const r=a(m,g,e);null!=r&&h.push({i:c++,type:"footer",value:r,index:g,height:i?i(r,g):o,reads:i?0:2,visible:!!i})}}return h},n=class{constructor(r){e(this,r),this.range={offset:0,length:0},this.viewportHeight=0,this.cells=[],this.virtualDom=[],this.isEnabled=!1,this.viewportOffset=0,this.currentScrollTop=0,this.indexDirty=0,this.lastItemLen=0,this.totalHeight=0,this.approxItemHeight=45,this.approxHeaderHeight=30,this.approxFooterHeight=30,this.onScroll=()=>{this.updateVirtualScroll()}}itemsChanged(){this.calcCells(),this.updateVirtualScroll()}async connectedCallback(){const e=this.el.closest("ion-content");e?(this.scrollEl=await e.getScrollElement(),this.contentEl=e,this.calcCells(),this.updateState()):console.error("<ion-virtual-scroll> must be used inside an <ion-content>")}componentDidUpdate(){this.updateState()}disconnectedCallback(){this.scrollEl=void 0}onResize(){this.calcCells(),this.updateVirtualScroll()}positionForItem(e){return Promise.resolve(((e,r,t)=>{const i=r.find((r=>"item"===r.type&&r.index===e));return i?t[i.i]:-1})(e,this.cells,this.getHeightIndex()))}async checkRange(e,r=-1){if(!this.items)return;const t=-1===r?this.items.length-e:r,i=((e,r)=>0===r?0:r===(e.length>0?e[e.length-1].index:0)+1?e.length:e.findIndex((e=>e.index===r)))(this.cells,e),s=m(this.items,this.itemHeight,this.headerHeight,this.footerHeight,this.headerFn,this.footerFn,this.approxHeaderHeight,this.approxFooterHeight,this.approxItemHeight,i,e,t);this.cells=((e,r,t)=>{if(0===t&&r.length>=e.length)return r;for(let i=0;i<r.length;i++)e[i+t]=r[i];return e})(this.cells,s,i),this.lastItemLen=this.items.length,this.indexDirty=Math.max(e-1,0),this.scheduleUpdate()}async checkEnd(){this.items&&this.checkRange(this.lastItemLen)}updateVirtualScroll(){this.isEnabled&&this.scrollEl&&(this.timerUpdate&&(clearTimeout(this.timerUpdate),this.timerUpdate=void 0),r(this.readVS.bind(this)),t(this.writeVS.bind(this)))}readVS(){const{contentEl:e,scrollEl:r,el:t}=this;let i=0,s=t;for(;s&&s!==e;)i+=s.offsetTop,s=s.offsetParent;this.viewportOffset=i,r&&(this.viewportHeight=r.offsetHeight,this.currentScrollTop=r.scrollTop)}writeVS(){const e=this.indexDirty,r=(a=this.currentScrollTop-this.viewportOffset,d=this.viewportHeight,{top:Math.max(a-100,0),bottom:a+d+100}),t=this.getHeightIndex(),s=((e,r)=>{const t=r.top,i=r.bottom;let s=0;for(;s<e.length&&!(e[s]>t);s++);const a=Math.max(s-2-1,0);for(;s<e.length&&!(e[s]>=i);s++);return{offset:a,length:Math.min(s+2,e.length)-a}})(t,r);var a,d;((e,r,t)=>e<=t.offset+t.length||r.offset!==t.offset||r.length!==t.length)(e,this.range,s)&&(this.range=s,((e,r,t,i)=>{for(const o of e)o.change=0,o.d=!0;const s=[],a=i.offset+i.length;for(let o=i.offset;o<a;o++){const i=t[o],a=e.find((e=>e.d&&e.cell===i));if(a){const e=r[o];e!==a.top&&(a.top=e,a.change=1),a.d=!1}else s.push(i)}const d=e.filter((e=>e.d));for(const o of s){const t=d.find((e=>e.d&&e.cell.type===o.type)),i=o.i;t?(t.d=!1,t.change=2,t.cell=o,t.top=r[i]):e.push({d:!1,cell:o,visible:!0,change:2,top:r[i]})}e.filter((e=>e.d&&-9999!==e.top)).forEach((e=>{e.change=1,e.top=-9999}))})(this.virtualDom,t,this.cells,s),this.nodeRender?((e,r,t,i)=>{const s=Array.from(e.children).filter((e=>"TEMPLATE"!==e.tagName)),a=s.length;let d;for(let o=0;o<t.length;o++){const c=t[o],m=c.cell;if(2===c.change){if(o<a)d=s[o],r(d,m,o);else{const t=l(e,m.type);d=r(t,m,o)||t,d.classList.add("virtual-item"),e.appendChild(d)}d.$ionCell=m}else d=s[o];0!==c.change&&(d.style.transform=`translate3d(0,${c.top}px,0)`);const n=m.visible;c.visible!==n&&(n?d.classList.remove("virtual-loading"):d.classList.add("virtual-loading"),c.visible=n),m.reads>0&&(i(m,d),m.reads--)}})(this.el,this.nodeRender,this.virtualDom,this.updateCellHeight.bind(this)):this.domRender?this.domRender(this.virtualDom):this.renderItem&&i(this))}updateCellHeight(e,r){const t=()=>{if(r.$ionCell===e){const t=window.getComputedStyle(r),i=r.offsetHeight+parseFloat(t.getPropertyValue("margin-bottom"));this.setCellHeight(e,i)}};r?o(r,t):t()}setCellHeight(e,r){const t=e.i;e===this.cells[t]&&(e.height===r&&!0===e.visible||(e.visible=!0,e.height=r,this.indexDirty=Math.min(this.indexDirty,t),this.scheduleUpdate()))}scheduleUpdate(){clearTimeout(this.timerUpdate),this.timerUpdate=setTimeout((()=>this.updateVirtualScroll()),100)}updateState(){const e=!(!this.scrollEl||!this.cells);e!==this.isEnabled&&(this.enableScrollEvents(e),e&&this.updateVirtualScroll())}calcCells(){this.items&&(this.lastItemLen=this.items.length,this.cells=m(this.items,this.itemHeight,this.headerHeight,this.footerHeight,this.headerFn,this.footerFn,this.approxHeaderHeight,this.approxFooterHeight,this.approxItemHeight,0,0,this.lastItemLen),this.indexDirty=0)}getHeightIndex(){return this.indexDirty!==1/0&&this.calcHeightIndex(this.indexDirty),this.heightIndex}calcHeightIndex(e=0){this.heightIndex=((e,r)=>{if(!e)return new Uint32Array(r);if(e.length===r)return e;if(r>e.length){const t=new Uint32Array(r);return t.set(e),t}return e.subarray(0,r)})(this.heightIndex,this.cells.length),this.totalHeight=((e,r,t)=>{let i=e[t];for(let s=t;s<e.length;s++)e[s]=i,i+=r[s].height;return i})(this.heightIndex,this.cells,e),this.indexDirty=1/0}enableScrollEvents(e){this.rmEvent&&(this.rmEvent(),this.rmEvent=void 0);const r=this.scrollEl;r&&(this.isEnabled=e,r.addEventListener("scroll",this.onScroll),this.rmEvent=()=>{r.removeEventListener("scroll",this.onScroll)})}renderVirtualNode(e){const{type:r,value:t,index:i}=e.cell;switch(r){case"item":return this.renderItem(t,i);case"header":return this.renderHeader(t,i);case"footer":return this.renderFooter(t,i)}}render(){return s(a,{style:{height:`${this.totalHeight}px`}},this.renderItem&&s(h,{dom:this.virtualDom},this.virtualDom.map((e=>this.renderVirtualNode(e)))))}get el(){return d(this)}static get watchers(){return{itemHeight:["itemsChanged"],headerHeight:["itemsChanged"],footerHeight:["itemsChanged"],items:["itemsChanged"]}}},h=({dom:e},r,t)=>t.map(r,((r,t)=>{const i=e[t],s=r.vattrs||{};let a=s.class||"";return a+="virtual-item ",i.visible||(a+="virtual-loading"),Object.assign(Object.assign({},r),{vattrs:Object.assign(Object.assign({},s),{class:a,style:Object.assign(Object.assign({},s.style),{transform:`translate3d(0,${i.top}px,0)`})})})}));n.style=":root{--med-color-brand-primary-darkest:#074953;--med-color-brand-primary-darkest-rgb:7, 73, 83;--med-color-brand-primary-dark:#137585;--med-color-brand-primary-dark-rgb:19, 117, 133;--med-color-brand-primary-medium:#3aa8b9;--med-color-brand-primary-medium-rgb:58, 168, 185;--med-color-brand-primary-light:#73d6e5;--med-color-brand-primary-light-rgb:115, 214, 229;--med-color-brand-primary-lightest:#b0ecf5;--med-color-brand-primary-lightest-rgb:176, 236, 245;--med-color-brand-primary-gradient:linear-gradient(to right, #3aa8b9, #137585);--med-color-aula-darkest:#075344;--med-color-aula-darkest-rgb:7, 83, 68;--med-color-aula-dark:#13856e;--med-color-aula-dark-rgb:19, 133, 110;--med-color-aula-medium:#3ab89f;--med-color-aula-medium-rgb:58, 184, 159;--med-color-aula-light:#73e5cf;--med-color-aula-light-rgb:115, 229, 207;--med-color-aula-lightest:#b0f5e7;--med-color-aula-lightest-rgb:176, 245, 231;--med-color-material-darkest:#552607;--med-color-material-darkest-rgb:85, 38, 7;--med-color-material-dark:#854013;--med-color-material-dark-rgb:133, 64, 19;--med-color-material-medium:#b86d3b;--med-color-material-medium-rgb:184, 109, 59;--med-color-material-light:#e5a173;--med-color-material-light-rgb:229, 161, 115;--med-color-material-lightest:#f5ccb0;--med-color-material-lightest-rgb:245, 204, 176;--med-color-questoes-darkest:#073953;--med-color-questoes-darkest-rgb:7, 57, 83;--med-color-questoes-dark:#135f85;--med-color-questoes-dark-rgb:19, 95, 133;--med-color-questoes-medium:#3a8eb8;--med-color-questoes-medium-rgb:58, 142, 184;--med-color-questoes-light:#73bfe5;--med-color-questoes-light-rgb:115, 191, 229;--med-color-questoes-lightest:#b0def5;--med-color-questoes-lightest-rgb:176, 222, 245;--med-color-revalida-darkest:#53071e;--med-color-revalida-darkest-rgb:83, 7, 30;--med-color-revalida-dark:#851335;--med-color-revalida-dark-rgb:133, 19, 53;--med-color-revalida-medium:#b83a60;--med-color-revalida-medium-rgb:184, 58, 96;--med-color-revalida-light:#e57395;--med-color-revalida-light-rgb:229, 115, 149;--med-color-revalida-lightest:#f5b0c5;--med-color-revalida-lightest-rgb:245, 176, 197;--med-color-provaschecklist-darkest:#2b0755;--med-color-provaschecklist-darkest-rgb:43, 7, 85;--med-color-provaschecklist-dark:#481385;--med-color-provaschecklist-dark-rgb:72, 19, 133;--med-color-provaschecklist-medium:#753bb8;--med-color-provaschecklist-medium-rgb:117, 59, 184;--med-color-provaschecklist-light:#a873e5;--med-color-provaschecklist-light-rgb:168, 115, 229;--med-color-provaschecklist-lightest:#d1b2f5;--med-color-provaschecklist-lightest-rgb:209, 178, 245;--med-color-neutral-dark-prime:#141414;--med-color-neutral-dark-prime-rgb:20, 20, 20;--med-color-neutral-dark-40:#292929;--med-color-neutral-dark-40-rgb:41, 41, 41;--med-color-neutral-dark-30:#474747;--med-color-neutral-dark-30-rgb:71, 71, 71;--med-color-neutral-dark-20:#5c5c5c;--med-color-neutral-dark-20-rgb:92, 92, 92;--med-color-neutral-dark-10:#7a7a7a;--med-color-neutral-dark-10-rgb:122, 122, 122;--med-color-neutral-light-prime:#fafafa;--med-color-neutral-light-prime-rgb:250, 250, 250;--med-color-neutral-light-40:#ebebeb;--med-color-neutral-light-40-rgb:235, 235, 235;--med-color-neutral-light-30:#d6d6d6;--med-color-neutral-light-30-rgb:214, 214, 214;--med-color-neutral-light-20:#c2c2c2;--med-color-neutral-light-20-rgb:194, 194, 194;--med-color-neutral-light-10:#adadad;--med-color-neutral-light-10-rgb:173, 173, 173;--med-color-neutral-gradient:linear-gradient(to right, #141414, #fafafa);--med-color-feedback-warning-darkest:#504606;--med-color-feedback-warning-darkest-rgb:80, 70, 6;--med-color-feedback-warning-dark:#857513;--med-color-feedback-warning-dark-rgb:133, 117, 19;--med-color-feedback-warning-medium:#b8a73b;--med-color-feedback-warning-medium-rgb:184, 167, 59;--med-color-feedback-warning-light:#e5d673;--med-color-feedback-warning-light-rgb:229, 214, 115;--med-color-feedback-warning-lightest:#f5ecb0;--med-color-feedback-warning-lightest-rgb:245, 236, 176;--med-color-feedback-error-darkest:#520c07;--med-color-feedback-error-darkest-rgb:82, 12, 7;--med-color-feedback-error-dark:#851a13;--med-color-feedback-error-dark-rgb:133, 26, 19;--med-color-feedback-error-medium:#b8433b;--med-color-feedback-error-medium-rgb:184, 67, 59;--med-color-feedback-error-light:#e57a73;--med-color-feedback-error-light-rgb:229, 122, 115;--med-color-feedback-error-lightest:#f5b5b0;--med-color-feedback-error-lightest-rgb:245, 181, 176;--med-color-feedback-success-darkest:#065010;--med-color-feedback-success-darkest-rgb:6, 80, 16;--med-color-feedback-success-dark:#138522;--med-color-feedback-success-dark-rgb:19, 133, 34;--med-color-feedback-success-medium:#3bb84b;--med-color-feedback-success-medium-rgb:59, 184, 75;--med-color-feedback-success-light:#73e582;--med-color-feedback-success-light-rgb:115, 229, 130;--med-color-feedback-success-lightest:#b0f5b9;--med-color-feedback-success-lightest-rgb:176, 245, 185}:root{--med-font-family-brand:fsemeric;--med-font-family-base:fsemeric;--med-font-size-nano:10px;--med-font-size-xxxs:12px;--med-font-size-xxs:14px;--med-font-size-xs:16px;--med-font-size-sm:20px;--med-font-size-md:24px;--med-font-size-lg:32px;--med-font-size-xl:40px;--med-font-size-xxl:48px;--med-font-size-xxxl:64px;--med-font-size-huge:96px;--med-font-weight-thin:250;--med-font-weight-light:300;--med-font-weight-regular:400;--med-font-weight-medium:500;--med-font-weight-semibold:600;--med-font-weight-bold:700;--med-font-weight-extrabold:800;--med-font-weight-heavy:900;--med-line-height-compressed:100%;--med-line-height-double:100%}:root{--med-spacing-inset-nano:4px;--med-spacing-inset-xs:8px;--med-spacing-inset-sm:16px;--med-spacing-inset-base:24px;--med-spacing-inset-md:32px;--med-spacing-inset-md:32px;--med-spacing-inset-md:32px;--med-spacing-inset-xxl:64px;--med-spacing-squish-nano:4px 8px;--med-spacing-squish-xs:8px 16px;--med-spacing-squish-sm:8px 24px;--med-spacing-squish-base:8px 32px;--med-spacing-squish-md:16px 24px;--med-spacing-squish-lg:16px 32px;--med-spacing-squish-xl:24px 32px;--med-spacing-squish-xxl:32px 40px;--med-spacing-stretch-nano:8px 4px;--med-spacing-stretch-xs:16px 8px;--med-spacing-stretch-sm:24px 8px;--med-spacing-stretch-base:32px 8px;--med-spacing-stretch-md:24px 16px;--med-spacing-stretch-lg:32px 16px;--med-spacing-stretch-xl:32px 24px;--med-spacing-stretch-xxl:40px 32px;--med-spacing-inline-quark:2px;--med-spacing-inline-nano:4px;--med-spacing-inline-xxxs:8px;--med-spacing-inline-base:16px;--med-spacing-inline-xxs:24px;--med-spacing-inline-xs:32px;--med-spacing-inline-sm:40px;--med-spacing-inline-md:48px;--med-spacing-inline-lg:56px;--med-spacing-inline-xl:64px;--med-spacing-inline-xxl:72px;--med-spacing-inline-xxxl:80px;--med-spacing-inline-huge:120px;--med-spacing-inline-ultra:160px;--med-spacing-stack-quark:2px;--med-spacing-stack-nano:4px;--med-spacing-stack-xxxs:8px;--med-spacing-stack-base:16px;--med-spacing-stack-xxs:24px;--med-spacing-stack-xs:32px;--med-spacing-stack-sm:40px;--med-spacing-stack-md:48px;--med-spacing-stack-lg:56px;--med-spacing-stack-xl:64px;--med-spacing-stack-xxl:72px;--med-spacing-stack-xxxl:80px;--med-spacing-stack-huge:120px;--med-spacing-stack-ultra:160px}:root{--med-border-radius-none:0;--med-border-radius-quark:2px;--med-border-radius-nano:4px;--med-border-radius-sm:8px;--med-border-radius-md:16px;--med-border-radius-lg:24px;--med-border-radius-pill:31.25em;--med-border-radius-full:50%;--med-border-radius-speech-left-down:8px 8px 8px 0;--med-border-radius-speech-right-down:8px 8px 0 8px;--med-border-radius-speech-right-up:8px 0 8px 0px;--med-border-radius-speech-left-up:0 8px 8px 0px;--med-border-radius-table-down-sm:0 0 8px 8px;--med-border-radius-table-up-sm:8px 8px 0 0;--med-border-radius-table-down-md:16px 16px 0 0;--med-border-radius-table-up-md:0 0 16px 16px;--med-border-width-none:0;--med-border-width-quark:0.25px;--med-border-width-nano:0.5px;--med-border-width-hairline:1px;--med-border-width-thin:2px;--med-border-width-thick:4px;--med-border-width-bold:8px;--med-border-width-heavy:16px;--med-opacity-level-semiopaque:0.8;--med-opacity-level-intense:0.64;--med-opacity-level-half:0.5;--med-opacity-level-medium:0.32;--med-opacity-level-light:0.16;--med-opacity-level-semitransparent:0.08;--med-shadow-level-0:none;--med-shadow-level-1:0 0 2px rgba(0, 0, 0, 0.12), 0 2px 2px rgba(0, 0, 0, 0.14), 0 1px 3px rgba(0, 0, 0, 0.2);--med-shadow-level-2:0 2px 4px rgba(0, 0, 0, 0.14), 0 3px 4px rgba(0, 0, 0, 0.12), 0 1px 5px rgba(0, 0, 0, 0.2);--med-shadow-level-3:0 3px 3px rgba(0, 0, 0, 0.14), 0 3px 4px rgba(0, 0, 0, 0.12), 0 1px 8px rgba(0, 0, 0, 0.2);--med-shadow-level-4:0 0 2px rgba(0, 0, 0, 0.14), 0 4px 5px rgba(0, 0, 0, 0.12), 0 1px 10px rgba(0, 0, 0, 0.2);--med-shadow-level-5:0 6px 10px rgba(0, 0, 0, 0.14), 0 1px 18px rgba(0, 0, 0, 0.12), 0 3px 5px rgba(0, 0, 0, 0.2);--med-shadow-level-6:0 8px 10px rgba(0, 0, 0, 0.14), 0 3px 14px rgba(0, 0, 0, 0.12), 0 4px 5px rgba(0, 0, 0, 0.2);--med-shadow-level-7:0 9px 12px rgba(0, 0, 0, 0.14), 0 3px 16px rgba(0, 0, 0, 0.12), 0 5px 6px rgba(0, 0, 0, 0.2);--med-shadow-level-8:0 12px 17px rgba(0, 0, 0, 0.14), 0 5px 22px rgba(0, 0, 0, 0.12), 0 7px 8px rgba(0, 0, 0, 0.2);--med-shadow-level-9:0 16px 24px rgba(0, 0, 0, 0.14), 0 6px 30px rgba(0, 0, 0, 0.12), 0 8px 10px rgba(0, 0, 0, 0.2);--med-shadow-level-10:0 24px 38px rgba(0, 0, 0, 0.14), 0 9px 46px rgba(0, 0, 0, 0.12), 0 11px 15px rgba(0, 0, 0, 0.2)}ion-virtual-scroll{display:block;position:relative;width:100%;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}ion-virtual-scroll>.virtual-loading{opacity:0}ion-virtual-scroll>.virtual-item{position:absolute !important;top:0 !important;right:0 !important;left:0 !important;-webkit-transition-duration:0ms;transition-duration:0ms;will-change:transform}";export{n as ion_virtual_scroll}