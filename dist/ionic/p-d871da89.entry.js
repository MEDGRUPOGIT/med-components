import{r as e,e as t,i as n,h as o,H as i}from"./p-4d70e85a.js";import{c as s,n as r}from"./p-90f9de28.js";import{b as a}from"./p-2e2691bb.js";import{o as p,c as d}from"./p-8519437c.js";const c=class{constructor(n){e(this,n),this.ionRouteDataChanged=t(this,"ionRouteDataChanged",7),this.url=""}onUpdate(e){this.ionRouteDataChanged.emit(e)}onComponentProps(e,t){if(e===t)return;const n=e?Object.keys(e):[],o=t?Object.keys(t):[];if(n.length===o.length){for(const i of n)if(e[i]!==t[i])return void this.onUpdate(e)}else this.onUpdate(e)}connectedCallback(){this.ionRouteDataChanged.emit()}static get watchers(){return{url:["onUpdate"],component:["onUpdate"],componentProps:["onComponentProps"]}}},l=class{constructor(n){e(this,n),this.ionRouteRedirectChanged=t(this,"ionRouteRedirectChanged",7)}propDidChange(){this.ionRouteRedirectChanged.emit()}connectedCallback(){this.ionRouteRedirectChanged.emit()}static get watchers(){return{from:["propDidChange"],to:["propDidChange"]}}},x=e=>"/"+e.filter((e=>e.length>0)).join("/"),h=e=>{if(null==e)return[""];const t=e.split("?")[0].split("/").map((e=>e.trim())).filter((e=>e.length>0));return 0===t.length?[""]:t},m=async(e,t,n,o,i=!1,r)=>{try{const a=g(e);if(o>=t.length||!a)return i;await new Promise((e=>s(a,e)));const p=t[o],d=await a.setRouteId(p.id,p.params,n,r);return d.changed&&(n="root",i=!0),i=await m(d.element,t,n,o+1,i,r),d.markVisible&&await d.markVisible(),i}catch(a){return console.error(a),!1}},u=":not([no-router]) ion-nav, :not([no-router]) ion-tabs, :not([no-router]) ion-router-outlet",g=e=>{if(!e)return;if(e.matches(u))return e;return e.querySelector(u)||void 0},f=(e,t)=>t.find((t=>((e,t)=>{const{from:n,to:o}=t;if(void 0===o)return!1;if(n.length>e.length)return!1;for(let i=0;i<n.length;i++){const t=n[i];if("*"===t)return!0;if(t!==e[i])return!1}return n.length===e.length})(e,t))),b=(e,t)=>{const n=Math.min(e.length,t.length);let o=0;for(;o<n&&e[o].toLowerCase()===t[o].id;o++);return o},w=(e,t)=>{const n=new R(e);let o,i=!1;for(let s=0;s<t.length;s++){const e=t[s].path;if(""===e[0])i=!0;else{for(const t of e){const e=n.next();if(":"===t[0]){if(""===e)return null;o=o||[],(o[s]||(o[s]={}))[t.slice(1)]=e}else if(e!==t)return null}i=!1}}return i&&i!==(""===n.next())?null:o?t.map(((e,t)=>({id:e.id,path:e.path,params:v(e.params,o[t]),beforeEnter:e.beforeEnter,beforeLeave:e.beforeLeave}))):t},v=(e,t)=>e||t?Object.assign(Object.assign({},e),t):void 0,y=(e,t)=>{let n=null,o=0;for(const i of t){const t=w(e,i);if(null!==t){const e=k(t);e>o&&(o=e,n=t)}}return n},k=e=>{let t=1,n=1;for(const o of e)for(const e of o.path)":"===e[0]?t+=Math.pow(1,n):""!==e&&(t+=Math.pow(2,n)),n++;return t};class R{constructor(e){this.path=e.slice()}next(){return this.path.length>0?this.path.shift():""}}const C=e=>Array.from(e.children).filter((e=>"ION-ROUTE-REDIRECT"===e.tagName)).map((e=>{const t=E(e,"to");return{from:h(E(e,"from")),to:null==t?void 0:h(t)}})),j=e=>P(q(e)),q=(e,t=e)=>Array.from(t.children).filter((e=>"ION-ROUTE"===e.tagName&&e.component)).map((t=>{const n=E(t,"component");if(null==n)throw new Error("component missing in ion-route");return{path:h(E(t,"url")),id:n.toLowerCase(),params:t.componentProps,beforeLeave:t.beforeLeave,beforeEnter:t.beforeEnter,children:q(e,t)}})),E=(e,t)=>t in e?e[t]:e.hasAttribute(t)?e.getAttribute(t):null,P=e=>{const t=[];for(const n of e)U([],t,n);return t},U=(e,t,n)=>{const o=e.slice();if(o.push({id:n.id,path:n.path,params:n.params,beforeLeave:n.beforeLeave,beforeEnter:n.beforeEnter}),0!==n.children.length)for(const i of n.children)U(o,t,i);else t.push(o)},O=class{constructor(n){e(this,n),this.ionRouteWillChange=t(this,"ionRouteWillChange",7),this.ionRouteDidChange=t(this,"ionRouteDidChange",7),this.previousPath=null,this.busy=!1,this.state=0,this.lastState=0,this.root="/",this.useHash=!0}async componentWillLoad(){console.debug("[ion-router] router will load"),await(g(document.body)?Promise.resolve():new Promise((e=>{window.addEventListener("ionNavWillLoad",e,{once:!0})}))),console.debug("[ion-router] found nav"),await this.onRoutesChanged()}componentDidLoad(){window.addEventListener("ionRouteRedirectChanged",r(this.onRedirectChanged.bind(this),10)),window.addEventListener("ionRouteDataChanged",r(this.onRoutesChanged.bind(this),100))}async onPopState(){const e=this.historyDirection();let t=this.getPath();const n=await this.runGuards(t);return!0!==n?("object"==typeof n&&(t=h(n.redirect)),!1):(console.debug("[ion-router] URL changed -> update nav",t,e),this.writeNavStateRoot(t,e))}onBackButton(e){e.detail.register(0,(e=>{this.back(),e()}))}async canTransition(){const e=await this.runGuards();return!0===e||"object"==typeof e&&e.redirect}async push(e,t="forward",n){e.startsWith(".")&&(e=new URL(e,window.location.href).pathname),console.debug("[ion-router] URL pushed -> updating nav",e,t);let o=h(e),i=e.split("?")[1];const s=await this.runGuards(o);if(!0!==s){if("object"!=typeof s)return!1;o=h(s.redirect),i=s.redirect.split("?")[1]}return this.setPath(o,t,i),this.writeNavStateRoot(o,t,n)}back(){return window.history.back(),Promise.resolve(this.waitPromise)}async printDebug(){console.debug("CURRENT PATH",this.getPath()),console.debug("PREVIOUS PATH",this.previousPath),(e=>{console.group(`[ion-core] ROUTES[${e.length}]`);for(const t of e){const e=[];t.forEach((t=>e.push(...t.path)));const n=t.map((e=>e.id));console.debug(`%c ${x(e)}`,"font-weight: bold; padding-left: 20px","=>\t",`(${n.join(", ")})`)}console.groupEnd()})(j(this.el)),(e=>{console.group(`[ion-core] REDIRECTS[${e.length}]`);for(const t of e)t.to&&console.debug("FROM: ",`$c ${x(t.from)}`,"font-weight: bold"," TO: ",`$c ${x(t.to)}`,"font-weight: bold");console.groupEnd()})(C(this.el))}async navChanged(e){if(this.busy)return console.warn("[ion-router] router is busy, navChanged was cancelled"),!1;const{ids:t,outlet:n}=await(async()=>{const e=[];let t,n=window.document.body;for(;t=g(n),t;){const o=await t.getRouteId();if(!o)break;n=o.element,o.element=void 0,e.push(o)}return{ids:e,outlet:t}})(),o=((e,t)=>{let n=null,o=0;const i=e.map((e=>e.id));for(const s of t){const e=b(i,s);e>o&&(n=s,o=e)}return n?n.map(((t,n)=>({id:t.id,path:t.path,params:v(t.params,e[n]&&e[n].params)}))):null})(t,j(this.el));if(!o)return console.warn("[ion-router] no matching URL for ",t.map((e=>e.id))),!1;const i=(e=>{const t=[];for(const n of e)for(const e of n.path)if(":"===e[0]){const o=n.params&&n.params[e.slice(1)];if(!o)return null;t.push(o)}else""!==e&&t.push(e);return t})(o);return i?(console.debug("[ion-router] nav changed -> update URL",t,i),this.setPath(i,e),await this.safeWriteNavState(n,o,"root",i,null,t.length),!0):(console.warn("[ion-router] router could not match path because some required param is missing"),!1)}onRedirectChanged(){const e=this.getPath();e&&f(e,C(this.el))&&this.writeNavStateRoot(e,"root")}onRoutesChanged(){return this.writeNavStateRoot(this.getPath(),"root")}historyDirection(){const e=window;null===e.history.state&&(this.state++,e.history.replaceState(this.state,e.document.title,e.document.location&&e.document.location.href));const t=e.history.state,n=this.lastState;return this.lastState=t,t>n||t>=n&&n>0?"forward":t<n?"back":"root"}async writeNavStateRoot(e,t,n){if(!e)return console.error("[ion-router] URL is not part of the routing set"),!1;const o=C(this.el),i=f(e,o);let s=null;i&&(this.setPath(i.to,t),s=i.from,e=i.to);const r=j(this.el),a=y(e,r);return a?this.safeWriteNavState(document.body,a,t,e,s,0,n):(console.error("[ion-router] the path does not match any route"),!1)}async safeWriteNavState(e,t,n,o,i,s=0,r){const a=await this.lock();let p=!1;try{p=await this.writeNavState(e,t,n,o,i,s,r)}catch(d){console.error(d)}return a(),p}async lock(){const e=this.waitPromise;let t;return this.waitPromise=new Promise((e=>t=e)),void 0!==e&&await e,t}async runGuards(e=this.getPath(),t=h(this.previousPath)){if(!e||!t)return!0;const n=j(this.el),o=y(e,n),i=y(t,n),s=o&&o[o.length-1].beforeEnter,r=i&&i[i.length-1].beforeLeave,a=!r||await r();if(!1===a||"object"==typeof a)return a;const p=!s||await s();return!1!==p&&"object"!=typeof p||p}async writeNavState(e,t,n,o,i,s=0,r){if(this.busy)return console.warn("[ion-router] router is busy, transition was cancelled"),!1;this.busy=!0;const a=this.routeChangeEvent(o,i);a&&this.ionRouteWillChange.emit(a);const p=await m(e,t,n,s,!1,r);return this.busy=!1,p&&console.debug("[ion-router] route changed",o),a&&this.ionRouteDidChange.emit(a),p}setPath(e,t,n){this.state++,((e,t,n,o,i,s,r)=>{let a=x([...h(this.root),...o]);n&&(a="#"+a),void 0!==r&&(a=a+"?"+r),"forward"===i?e.pushState(s,"",a):e.replaceState(s,"",a)})(window.history,0,this.useHash,e,t,this.state,n)}getPath(){return((e,t)=>{let n=e.pathname;if(this.useHash){const t=e.hash;n="#"===t[0]?t.slice(1):""}return((e,t)=>{if(e.length>t.length)return null;if(e.length<=1&&""===e[0])return t;for(let n=0;n<e.length;n++)if(e[n].length>0&&e[n]!==t[n])return null;return t.length===e.length?[""]:t.slice(e.length)})(h(t),h(n))})(window.location,this.root)}routeChangeEvent(e,t){const n=this.previousPath,o=x(e);return this.previousPath=o,o===n?null:{from:n,redirectedFrom:t?x(t):null,to:o}}get el(){return n(this)}},z=class{constructor(t){e(this,t),this.routerDirection="forward",this.onClick=e=>{p(this.href,e,this.routerDirection,this.routerAnimation)}}render(){const e=a(this),t={href:this.href,rel:this.rel,target:this.target};return o(i,{onClick:this.onClick,class:d(this.color,{[e]:!0,"ion-activatable":!0})},o("a",Object.assign({},t),o("slot",null)))}};z.style=':root{--med-font-family-brand:"fsemeric";--med-font-family-base:"fsemeric";--med-font-size-nano:10px;--med-font-size-xxxs:12px;--med-font-size-xxs:14px;--med-font-size-xs:16px;--med-font-size-sm:20px;--med-font-size-md:24px;--med-font-size-lg:32px;--med-font-size-xl:40px;--med-font-size-xxl:48px;--med-font-size-xxxl:64px;--med-font-size-huge:96px;--med-font-weight-thin:250;--med-font-weight-light:300;--med-font-weight-regular:400;--med-font-weight-medium:500;--med-font-weight-semibold:600;--med-font-weight-bold:700;--med-font-weight-extrabold:800;--med-font-weight-heavy:900;--med-letter-spacing-ultracompressed:-0.04;--med-letter-spacing-compressed:-0.02;--med-letter-spacing-default:0;--med-letter-spacing-medium:0.02;--med-letter-spacing-expanded:0.05;--med-letter-spacing-distant:0.1;--med-letter-spacing-far:0.2;--med-line-height-compressed:100%;--med-line-height-default:24px;--med-line-height-double:200%}:root{--med-spacing-inset-nano:4px;--med-spacing-inset-xs:8px;--med-spacing-inset-sm:16px;--med-spacing-inset-base:24px;--med-spacing-inset-md:32px;--med-spacing-inset-lg:40px;--med-spacing-inset-xl:48px;--med-spacing-inset-xxl:64px;--med-spacing-squish-nano:4px 8px;--med-spacing-squish-xs:8px 16px;--med-spacing-squish-sm:8px 24px;--med-spacing-squish-base:8px 32px;--med-spacing-squish-md:16px 24px;--med-spacing-squish-lg:16px 32px;--med-spacing-squish-xl:24px 32px;--med-spacing-squish-xxl:32px 40px;--med-spacing-stretch-nano:8px 4px;--med-spacing-stretch-xs:16px 8px;--med-spacing-stretch-sm:24px 8px;--med-spacing-stretch-base:32px 8px;--med-spacing-stretch-md:24px 16px;--med-spacing-stretch-lg:32px 16px;--med-spacing-stretch-xl:32px 24px;--med-spacing-stretch-xxl:40px 32px;--med-spacing-inline-quark:2px;--med-spacing-inline-nano:4px;--med-spacing-inline-xxxs:8px;--med-spacing-inline-base:16px;--med-spacing-inline-xxs:24px;--med-spacing-inline-xs:32px;--med-spacing-inline-sm:40px;--med-spacing-inline-md:48px;--med-spacing-inline-lg:56px;--med-spacing-inline-xl:64px;--med-spacing-inline-xxl:72px;--med-spacing-inline-xxxl:80px;--med-spacing-inline-huge:120px;--med-spacing-inline-ultra:160px;--med-spacing-stack-quark:2px;--med-spacing-stack-nano:4px;--med-spacing-stack-xxxs:8px;--med-spacing-stack-base:16px;--med-spacing-stack-xxs:24px;--med-spacing-stack-xs:32px;--med-spacing-stack-sm:40px;--med-spacing-stack-md:48px;--med-spacing-stack-lg:56px;--med-spacing-stack-xl:64px;--med-spacing-stack-xxl:72px;--med-spacing-stack-xxxl:80px;--med-spacing-stack-huge:120px;--med-spacing-stack-ultra:160px}:root{--med-border-radius-none:0;--med-border-radius-quark:2px;--med-border-radius-nano:4px;--med-border-radius-sm:8px;--med-border-radius-md:16px;--med-border-radius-lg:24px;--med-border-radius-pill:31.25em;--med-border-radius-full:50%;--med-border-radius-speech-left-down:8px 8px 8px 0;--med-border-radius-speech-right-down:8px 8px 0 8px;--med-border-radius-speech-right-up:8px 0 8px 0px;--med-border-radius-speech-left-up:0 8px 8px 0px;--med-border-radius-table-down-sm:0 0 8px 8px;--med-border-radius-table-up-sm:8px 8px 0 0;--med-border-radius-table-down-md:16px 16px 0 0;--med-border-radius-table-up-md:0 0 16px 16px;--med-border-width-none:0;--med-border-width-quark:0.25px;--med-border-width-nano:0.5px;--med-border-width-hairline:1px;--med-border-width-thin:2px;--med-border-width-thick:4px;--med-border-width-bold:8px;--med-border-width-heavy:16px;--med-opacity-level-semiopaque:0.8;--med-opacity-level-intense:0.64;--med-opacity-level-half:0.5;--med-opacity-level-medium:0.32;--med-opacity-level-light:0.16;--med-opacity-level-semitransparent:0.08;--med-shadow-level-0:none;--med-shadow-level-1:0 0 2px rgba(0, 0, 0, 0.12), 0 2px 2px rgba(0, 0, 0, 0.14), 0 1px 3px rgba(0, 0, 0, 0.2);--med-shadow-level-2:0 2px 4px rgba(0, 0, 0, 0.14), 0 3px 4px rgba(0, 0, 0, 0.12), 0 1px 5px rgba(0, 0, 0, 0.2);--med-shadow-level-3:0 3px 3px rgba(0, 0, 0, 0.14), 0 3px 4px rgba(0, 0, 0, 0.12), 0 1px 8px rgba(0, 0, 0, 0.2);--med-shadow-level-4:0 0 2px rgba(0, 0, 0, 0.14), 0 4px 5px rgba(0, 0, 0, 0.12), 0 1px 10px rgba(0, 0, 0, 0.2);--med-shadow-level-5:0 6px 10px rgba(0, 0, 0, 0.14), 0 1px 18px rgba(0, 0, 0, 0.12), 0 3px 5px rgba(0, 0, 0, 0.2);--med-shadow-level-6:0 8px 10px rgba(0, 0, 0, 0.14), 0 3px 14px rgba(0, 0, 0, 0.12), 0 4px 5px rgba(0, 0, 0, 0.2);--med-shadow-level-7:0 9px 12px rgba(0, 0, 0, 0.14), 0 3px 16px rgba(0, 0, 0, 0.12), 0 5px 6px rgba(0, 0, 0, 0.2);--med-shadow-level-8:0 12px 17px rgba(0, 0, 0, 0.14), 0 5px 22px rgba(0, 0, 0, 0.12), 0 7px 8px rgba(0, 0, 0, 0.2);--med-shadow-level-9:0 16px 24px rgba(0, 0, 0, 0.14), 0 6px 30px rgba(0, 0, 0, 0.12), 0 8px 10px rgba(0, 0, 0, 0.2);--med-shadow-level-10:0 24px 38px rgba(0, 0, 0, 0.14), 0 9px 46px rgba(0, 0, 0, 0.12), 0 11px 15px rgba(0, 0, 0, 0.2)}:host{--background:transparent;--color:var(--ion-color-primary, #3880ff);background:var(--background);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}a{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit}';export{c as ion_route,l as ion_route_redirect,O as ion_router,z as ion_router_link}