import{__awaiter,__generator}from"tslib";
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */import{r as registerInstance,h,H as Host,f as getElement}from"./index-27668d5b.js";import{l as chevronDown}from"./index-f7dc70ba.js";import{c as config,b as getIonMode}from"./ionic-global-8fa0f940.js";import{r as raf,t as transitionEndAsync,a as addEventListener,b as removeEventListener,g as getElementRoot}from"./helpers-ae653409.js";var tpAccordionIosCss=":host{display:block;position:relative;width:100%;background-color:var(--ion-background-color, #ffffff);overflow:hidden;z-index:0}:host(.accordion-expanding) ::slotted(ion-item[slot=header]),:host(.accordion-expanded) ::slotted(ion-item[slot=header]){--border-width:0px}:host(.accordion-animated){-webkit-transition:all 300ms cubic-bezier(0.25, 0.8, 0.5, 1);transition:all 300ms cubic-bezier(0.25, 0.8, 0.5, 1)}:host(.accordion-animated) #content{-webkit-transition:max-height 300ms cubic-bezier(0.25, 0.8, 0.5, 1);transition:max-height 300ms cubic-bezier(0.25, 0.8, 0.5, 1)}#content{overflow:hidden;will-change:max-height}:host(.accordion-collapsing) #content{max-height:0 !important}:host(.accordion-collapsed) #content{display:none}:host(.accordion-expanding) #content{max-height:0}:host(.accordion-expanding) #content-wrapper{overflow:auto}:host(.accordion-disabled) #header,:host(.accordion-readonly) #header,:host(.accordion-disabled) #content,:host(.accordion-readonly) #content{pointer-events:none}:host(.accordion-disabled) #header,:host(.accordion-disabled) #content{opacity:0.4}@media (prefers-reduced-motion: reduce){:host,#content{-webkit-transition:none !important;transition:none !important}}:host(.accordion-next) ::slotted(ion-item[slot=header]){--border-width:0.55px 0px 0.55px 0px}";var tpAccordionMdCss=":host{display:block;position:relative;width:100%;background-color:var(--ion-background-color, #ffffff);overflow:hidden;z-index:0}:host(.accordion-expanding) ::slotted(ion-item[slot=header]),:host(.accordion-expanded) ::slotted(ion-item[slot=header]){--border-width:0px}:host(.accordion-animated){-webkit-transition:all 300ms cubic-bezier(0.25, 0.8, 0.5, 1);transition:all 300ms cubic-bezier(0.25, 0.8, 0.5, 1)}:host(.accordion-animated) #content{-webkit-transition:max-height 300ms cubic-bezier(0.25, 0.8, 0.5, 1);transition:max-height 300ms cubic-bezier(0.25, 0.8, 0.5, 1)}#content{overflow:hidden;will-change:max-height}:host(.accordion-collapsing) #content{max-height:0 !important}:host(.accordion-collapsed) #content{display:none}:host(.accordion-expanding) #content{max-height:0}:host(.accordion-expanding) #content-wrapper{overflow:auto}:host(.accordion-disabled) #header,:host(.accordion-readonly) #header,:host(.accordion-disabled) #content,:host(.accordion-readonly) #content{pointer-events:none}:host(.accordion-disabled) #header,:host(.accordion-disabled) #content{opacity:0.4}@media (prefers-reduced-motion: reduce){:host,#content{-webkit-transition:none !important;transition:none !important}}";var TpAccordion=function(){function n(n){var t=this;registerInstance(this,n);this.updateListener=function(){return t.updateState(false)};this.setItemDefaults=function(){var n=t.getSlottedHeaderIonItem();if(!n){return}n.button=true;n.detail=false;if(n.lines===undefined){n.lines="full"}};this.getSlottedHeaderIonItem=function(){var n=t.headerEl;if(!n){return}var e=n.querySelector("slot");if(!e){return}if(e.assignedElements===undefined)return;return e.assignedElements().find((function(n){return n.tagName==="ION-ITEM"}))};this.setAria=function(n){if(n===void 0){n=false}var e=t.getSlottedHeaderIonItem();if(!e){return}var i=getElementRoot(e);var o=i.querySelector("button");if(!o){return}o.setAttribute("aria-expanded","".concat(n))};this.slotToggleIcon=function(){var n=t.getSlottedHeaderIonItem();if(!n){return}var e=t,i=e.toggleIconSlot,o=e.toggleIcon;var r=n.querySelector(".ion-accordion-toggle-icon");if(r){return}var a=document.createElement("ion-icon");a.slot=i;a.lazy=false;a.classList.add("ion-accordion-toggle-icon");a.icon=o;a.setAttribute("aria-hidden","true")};this.expandAccordion=function(n){if(n===void 0){n=false}var e=t,i=e.contentEl,o=e.contentElWrapper;if(n||i===undefined||o===undefined){t.state=4;return}if(t.state===4){return}if(t.currentRaf!==undefined){cancelAnimationFrame(t.currentRaf)}if(t.shouldAnimate()){raf((function(){t.state=8;t.currentRaf=raf((function(){return __awaiter(t,void 0,void 0,(function(){var n,t;return __generator(this,(function(e){switch(e.label){case 0:n=o.offsetHeight;t=transitionEndAsync(i,2e3);i.style.setProperty("max-height","".concat(n,"px"));return[4,t];case 1:e.sent();this.state=4;i.style.removeProperty("max-height");return[2]}}))}))}))}))}else{t.state=4}};this.collapseAccordion=function(n){if(n===void 0){n=false}var e=t.contentEl;if(n||e===undefined){t.state=1;return}if(t.state===1){return}if(t.currentRaf!==undefined){cancelAnimationFrame(t.currentRaf)}if(t.shouldAnimate()){t.currentRaf=raf((function(){return __awaiter(t,void 0,void 0,(function(){var n;var t=this;return __generator(this,(function(i){n=e.offsetHeight;e.style.setProperty("max-height","".concat(n,"px"));raf((function(){return __awaiter(t,void 0,void 0,(function(){var n;return __generator(this,(function(t){switch(t.label){case 0:n=transitionEndAsync(e,2e3);this.state=2;return[4,n];case 1:t.sent();this.state=1;e.style.removeProperty("max-height");return[2]}}))}))}));return[2]}))}))}))}else{t.state=1}};this.shouldAnimate=function(){if(typeof window==="undefined"){return false}var n=matchMedia("(prefers-reduced-motion: reduce)").matches;if(n){return false}var e=config.get("animated",true);if(!e){return false}if(t.accordionGroupEl&&!t.accordionGroupEl.animated){return false}return true};this.updateState=function(n){if(n===void 0){n=false}return __awaiter(t,void 0,void 0,(function(){var t,e,i,o,r,a,s,c;return __generator(this,(function(d){t=this.accordionGroupEl;e=this.value;if(!t){return[2]}i=t.value;o=Array.isArray(i)?i.includes(e):i===e;if(o){this.expandAccordion(n);this.isNext=this.isPrevious=false}else{this.collapseAccordion(n);r=this.getNextSibling();a=r===null||r===void 0?void 0:r.value;if(a!==undefined){this.isPrevious=Array.isArray(i)?i.includes(a):i===a}s=this.getPreviousSibling();c=s===null||s===void 0?void 0:s.value;if(c!==undefined){this.isNext=Array.isArray(i)?i.includes(c):i===c}}return[2]}))}))};this.getNextSibling=function(){if(!t.el){return}var n=t.el.nextElementSibling;if((n===null||n===void 0?void 0:n.tagName)!=="ION-ACCORDION"){return}return n};this.getPreviousSibling=function(){if(!t.el){return}var n=t.el.previousElementSibling;if((n===null||n===void 0?void 0:n.tagName)!=="ION-ACCORDION"){return}return n};this.state=1;this.isNext=false;this.isPrevious=false;this.value="ion-accordion-".concat(accordionIds++);this.disabled=false;this.readonly=false;this.toggleIcon=chevronDown;this.toggleIconSlot="end"}n.prototype.valueChanged=function(){this.updateState()};n.prototype.connectedCallback=function(){var n;var t=this.accordionGroupEl=(n=this.el)===null||n===void 0?void 0:n.closest("tp-accordion-group");if(t){this.updateState(true);addEventListener(t,"ionValueChange",this.updateListener)}};n.prototype.disconnectedCallback=function(){var n=this.accordionGroupEl;if(n){removeEventListener(n,"ionValueChange",this.updateListener)}};n.prototype.componentDidLoad=function(){var n=this;this.setItemDefaults();this.slotToggleIcon();raf((function(){var t=n.state===4||n.state===8;n.setAria(t)}))};n.prototype.toggleExpanded=function(){var n=this,t=n.accordionGroupEl,e=n.value,i=n.state;if(t){var o=i===1||i===2;t.requestAccordionToggle(e,o)}};n.prototype.render=function(){var n;var t=this;var e=this,i=e.disabled,o=e.readonly;var r=getIonMode(this);var a=this.state===4||this.state===8;var s=a?"header expanded":"header";var c=a?"content expanded":"content";this.setAria(a);return h(Host,{class:(n={},n[r]=true,n["accordion-expanding"]=this.state===8,n["accordion-expanded"]=this.state===4,n["accordion-collapsing"]=this.state===2,n["accordion-collapsed"]=this.state===1,n["accordion-next"]=this.isNext,n["accordion-previous"]=this.isPrevious,n["accordion-disabled"]=i,n["accordion-readonly"]=o,n["accordion-animated"]=this.shouldAnimate(),n)},h("div",{onClick:function(){return t.toggleExpanded()},id:"header",part:s,"aria-controls":"content",ref:function(n){return t.headerEl=n}},h("slot",{name:"header"})),h("div",{id:"content",part:c,role:"region","aria-labelledby":"header",ref:function(n){return t.contentEl=n}},h("div",{id:"content-wrapper",ref:function(n){return t.contentElWrapper=n}},h("slot",{name:"content"}))))};Object.defineProperty(n,"delegatesFocus",{get:function(){return true},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(n,"watchers",{get:function(){return{value:["valueChanged"]}},enumerable:false,configurable:true});return n}();var accordionIds=0;TpAccordion.style={ios:tpAccordionIosCss,md:tpAccordionMdCss};export{TpAccordion as med_accordion};